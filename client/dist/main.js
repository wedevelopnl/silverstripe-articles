window.addEventListener("DOMContentLoaded",(function(){var t=document.querySelectorAll("[data-filter]"),e={},n=document.querySelector("[data-all-entities]");n&&(n=n.dataset.filterEntityName);var o=new URLSearchParams(window.location.search);function a(){var t=window.location.protocol,e=window.location.host,n=window.location.pathname;return"".concat(t,"//").concat(e).concat(n)}function c(t,e){window.history.pushState({},t,e)}function r(){Object.keys(e).forEach((function(t){Array.isArray(e[t])&&0!==e[t].length&&o.set(t,e[t].join(","))})),o.has("p")&&o.delete("p");var t=o.toString();return t?"".concat(a(),"?").concat(t):a()}if(o.has(n)){if(!o.get(n).toString())return o.delete(n),void c(document.title,r());o.forEach((function(t,n){t.split(",").forEach((function(t){e[n]||(e[n]=[]),e[n].includes(t)?e[n].splice(e[n].indexOf(t),1):e[n].push(t)}))}))}t&&Array.from(t).forEach((function(t){t.addEventListener("click",(function(t){t.preventDefault();var a=t.currentTarget.dataset.urlSegment;a&&(e[n]||(e[n]=[]),e[n].includes(a)?e[n].splice(e[n].indexOf(a),1):e[n].push(a),0===e[n].length&&o.delete(n),c(document.title,r()),window.location.reload())}))}));var i=document.getElementById("ArticleFilterForm");null==i||i.addEventListener("submit",(function(t){for(var e=t.target,n={},o=0;o<e.length;o+=1){var a,c=e.elements[o],r=c.name;"text"===c.type&&c.value&&(n[r]=c.value),"checkbox"===c.type&&c.checked&&(n[r=c.name.substr(0,c.name.indexOf("["))]=null!==(a=n[r])&&void 0!==a?a:[],n[r].push(c.value)),"select-one"===c.type&&c.value&&(n[r]=c.value)}var i=location.protocol+"//"+location.host+location.pathname,l=decodeURIComponent(new URLSearchParams(n).toString());window.location.href="".concat(i,"?").concat(l),t.preventDefault()}))}));
