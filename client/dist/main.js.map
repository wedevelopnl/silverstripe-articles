{"version":3,"file":"main.js","mappings":";;;;;AAAAA,MAAM,CAACC,gBAAgB,CAAC,kBAAkB,EAAE,YAAM;EAChD,IAAMC,WAAW,GAAGC,QAAQ,CAACC,gBAAgB,CAAC,eAAe,CAAC;EAC9D,IAAMC,KAAK,GAAG,CAAC,CAAC;EAChB,IAAIC,cAAc,GAAGH,QAAQ,CAACI,aAAa,CAAC,qBAAqB,CAAC;EAElE,IAAID,cAAc,EAAE;IAClBA,cAAc,GAAGA,cAAc,CAACE,OAAO,CAACC,gBAAgB;EAC1D;EAEA,IAAMC,MAAM,GAAG,IAAIC,eAAe,CAACX,MAAM,CAACY,QAAQ,CAACC,MAAM,CAAC;;EAE1D;EACA,SAASC,MAAM,GAAG;IAChB,IAAQC,QAAQ,GAAKf,MAAM,CAACY,QAAQ,CAA5BG,QAAQ;IAChB,IAAQC,IAAI,GAAKhB,MAAM,CAACY,QAAQ,CAAxBI,IAAI;IACZ,IAAMC,IAAI,GAAGjB,MAAM,CAACY,QAAQ,CAACM,QAAQ;IACrC,iBAAUH,QAAQ,eAAKC,IAAI,SAAGC,IAAI;EACpC;;EAEA;EACA,SAASE,UAAU,CAACC,KAAK,EAAEC,GAAG,EAAE;IAC9BrB,MAAM,CAACsB,OAAO,CAACC,SAAS,CAAC,CAAC,CAAC,EAAEH,KAAK,EAAEC,GAAG,CAAC;EAC1C;EAEA,SAASG,aAAa,GAAG;IACvBC,MAAM,CAACC,IAAI,CAACrB,KAAK,CAAC,CAACsB,OAAO,CAAC,UAACC,OAAO,EAAK;MACtC,IAAIC,KAAK,CAACC,OAAO,CAACzB,KAAK,CAACuB,OAAO,CAAC,CAAC,IAAIvB,KAAK,CAACuB,OAAO,CAAC,CAACG,MAAM,KAAK,CAAC,EAAE;QAChErB,MAAM,CAACsB,GAAG,CAACJ,OAAO,EAAEvB,KAAK,CAACuB,OAAO,CAAC,CAACK,IAAI,CAAC,GAAG,CAAC,CAAC;MAC/C;IACF,CAAC,CAAC;IACF,IAAMC,WAAW,GAAGxB,MAAM,CAACyB,QAAQ,EAAE;IAErC,IAAID,WAAW,EAAE;MACf,iBAAUpB,MAAM,EAAE,cAAIoB,WAAW;IACnC;IAEA,OAAOpB,MAAM,EAAE;EACjB;;EAEA;EACA,IAAIJ,MAAM,CAAC0B,GAAG,CAAC9B,cAAc,CAAC,EAAE;IAC9B,IAAM+B,aAAa,GAAG3B,MAAM,CAAC4B,GAAG,CAAChC,cAAc,CAAC,CAAC6B,QAAQ,EAAE;IAC3D,IAAI,CAACE,aAAa,EAAE;MAClB3B,MAAM,UAAO,CAACJ,cAAc,CAAC;MAC7Ba,UAAU,CAAChB,QAAQ,CAACiB,KAAK,EAAEI,aAAa,EAAE,CAAC;MAC3C;IACF;IACAd,MAAM,CAACiB,OAAO,CAAC,UAACY,KAAK,EAAEC,GAAG,EAAK;MAC7BD,KAAK,CAACE,KAAK,CAAC,GAAG,CAAC,CAACd,OAAO,CAAC,UAACe,IAAI,EAAK;QACjC,IAAI,CAACrC,KAAK,CAACmC,GAAG,CAAC,EAAE;UACfnC,KAAK,CAACmC,GAAG,CAAC,GAAG,EAAE;QACjB;QACA,IAAI,CAACnC,KAAK,CAACmC,GAAG,CAAC,CAACG,QAAQ,CAACD,IAAI,CAAC,EAAE;UAC9BrC,KAAK,CAACmC,GAAG,CAAC,CAACI,IAAI,CAACF,IAAI,CAAC;QACvB,CAAC,MAAM;UACLrC,KAAK,CAACmC,GAAG,CAAC,CAACK,MAAM,CAACxC,KAAK,CAACmC,GAAG,CAAC,CAACM,OAAO,CAACJ,IAAI,CAAC,EAAE,CAAC,CAAC;QAChD;MACF,CAAC,CAAC;IACJ,CAAC,CAAC;EACJ;EAEA,IAAIxC,WAAW,EAAE;IACf2B,KAAK,CAACkB,IAAI,CAAC7C,WAAW,CAAC,CAACyB,OAAO,CAAC,UAACqB,MAAM,EAAK;MAC1C,IAAMC,YAAY,GAAG,SAAfA,YAAY,CAAIC,CAAC,EAAK;QAC1BA,CAAC,CAACC,cAAc,EAAE;QAClB,IAAMd,aAAa,GAAGa,CAAC,CAACE,aAAa,CAAC5C,OAAO,CAAC6C,UAAU;QACxD,IAAI,CAAChB,aAAa,EAAE;UAClB;QACF;QAEA,IAAI,CAAChC,KAAK,CAACC,cAAc,CAAC,EAAE;UAC1BD,KAAK,CAACC,cAAc,CAAC,GAAG,EAAE;QAC5B;QAEA,IAAI,CAACD,KAAK,CAACC,cAAc,CAAC,CAACqC,QAAQ,CAACN,aAAa,CAAC,EAAE;UAClDhC,KAAK,CAACC,cAAc,CAAC,CAACsC,IAAI,CAACP,aAAa,CAAC;QAC3C,CAAC,MAAM;UACLhC,KAAK,CAACC,cAAc,CAAC,CAACuC,MAAM,CAACxC,KAAK,CAACC,cAAc,CAAC,CAACwC,OAAO,CAACT,aAAa,CAAC,EAAE,CAAC,CAAC;QAC/E;QAEA,IAAIhC,KAAK,CAACC,cAAc,CAAC,CAACyB,MAAM,KAAK,CAAC,EAAE;UACtCrB,MAAM,UAAO,CAACJ,cAAc,CAAC;QAC/B;QAEAa,UAAU,CAAChB,QAAQ,CAACiB,KAAK,EAAEI,aAAa,EAAE,CAAC;QAC3CxB,MAAM,CAACY,QAAQ,CAAC0C,MAAM,EAAE;MAC1B,CAAC;MAEDN,MAAM,CAAC/C,gBAAgB,CAAC,OAAO,EAAEgD,YAAY,CAAC;IAChD,CAAC,CAAC;EACJ;EAEA,IAAMM,iBAAiB,GAAGpD,QAAQ,CAACqD,cAAc,CAAC,mBAAmB,CAAC;EAEtED,iBAAiB,CAACtD,gBAAgB,CAAC,QAAQ,EAAE,UAACiD,CAAC,EAAK;IAClD,IAAQO,MAAM,GAAKP,CAAC,CAAZO,MAAM;IACd,IAAMC,QAAQ,GAAG,CAAC,CAAC;IAEnB,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGF,MAAM,CAAC1B,MAAM,EAAE4B,CAAC,IAAI,CAAC,EAAE;MACzC,IAAMC,OAAO,GAAGH,MAAM,CAACI,QAAQ,CAACF,CAAC,CAAC;MAClC,IAAMG,IAAI,GAAKF,OAAO,CAAhBE,IAAI;MAEV,IAAIF,OAAO,CAACG,IAAI,KAAK,MAAM,IAAIH,OAAO,CAACrB,KAAK,EAAE;QAC5CmB,QAAQ,CAACI,IAAI,CAAC,GAAGF,OAAO,CAACrB,KAAK;MAChC;MAEA,IAAIqB,OAAO,CAACG,IAAI,KAAK,UAAU,IAAIH,OAAO,CAACI,OAAO,EAAE;QAAA;QAClDF,IAAI,GAAGF,OAAO,CAACE,IAAI,CAACG,MAAM,CAAC,CAAC,EAAEL,OAAO,CAACE,IAAI,CAAChB,OAAO,CAAC,GAAG,CAAC,CAAC;QACxDY,QAAQ,CAACI,IAAI,CAAC,qBAAGJ,QAAQ,CAACI,IAAI,CAAC,2DAAI,EAAE;QACrCJ,QAAQ,CAACI,IAAI,CAAC,CAAClB,IAAI,CAACgB,OAAO,CAACrB,KAAK,CAAC;MACpC;MAEA,IAAIqB,OAAO,CAACG,IAAI,KAAK,YAAY,IAAIH,OAAO,CAACrB,KAAK,EAAE;QAClDmB,QAAQ,CAACI,IAAI,CAAC,GAAGF,OAAO,CAACrB,KAAK;MAChC;IACF;;IAEA;IACA,IAAM2B,UAAU,GAAGtD,QAAQ,CAACG,QAAQ,GAAG,IAAI,GAAGH,QAAQ,CAACI,IAAI,GAAGJ,QAAQ,CAACM,QAAQ;IAC/E,IAAMiD,cAAc,GAAGC,kBAAkB,CAAC,IAAIzD,eAAe,CAAC+C,QAAQ,CAAC,CAACvB,QAAQ,EAAE,CAAC;IAEnFnC,MAAM,CAACY,QAAQ,CAACyD,IAAI,aAAMH,UAAU,cAAIC,cAAc,CAAE;IAExDjB,CAAC,CAACC,cAAc,EAAE;EACpB,CAAC,CAAC;AACJ,CAAC,CAAC,C","sources":["webpack://@wedevelopnl/silverstripe-articles/./client/src/main.js"],"sourcesContent":["window.addEventListener('DOMContentLoaded', () => {\n  const allEntities = document.querySelectorAll('[data-filter]');\n  const query = {};\n  let queryEntityKey = document.querySelector('[data-all-entities]');\n\n  if (queryEntityKey) {\n    queryEntityKey = queryEntityKey.dataset.filterEntityName;\n  }\n\n  const params = new URLSearchParams(window.location.search);\n\n  // Get location URL\n  function getUrl() {\n    const { protocol } = window.location;\n    const { host } = window.location;\n    const path = window.location.pathname;\n    return `${protocol}//${host}${path}`;\n  }\n\n  // Replace address URL\n  function replaceURL(title, url) {\n    window.history.pushState({}, title, url);\n  }\n\n  function setQueryParam() {\n    Object.keys(query).forEach((keyName) => {\n      if (Array.isArray(query[keyName]) && query[keyName].length !== 0) {\n        params.set(keyName, query[keyName].join(','));\n      }\n    });\n    const queryString = params.toString();\n\n    if (queryString) {\n      return `${getUrl()}?${queryString}`;\n    }\n\n    return getUrl();\n  }\n\n  // Check if filters already has been set\n  if (params.has(queryEntityKey)) {\n    const currentEntity = params.get(queryEntityKey).toString();\n    if (!currentEntity) {\n      params.delete(queryEntityKey);\n      replaceURL(document.title, setQueryParam());\n      return;\n    }\n    params.forEach((value, key) => {\n      value.split(',').forEach((item) => {\n        if (!query[key]) {\n          query[key] = [];\n        }\n        if (!query[key].includes(item)) {\n          query[key].push(item);\n        } else {\n          query[key].splice(query[key].indexOf(item), 1);\n        }\n      });\n    });\n  }\n\n  if (allEntities) {\n    Array.from(allEntities).forEach((entity) => {\n      const clickHandler = (e) => {\n        e.preventDefault();\n        const currentEntity = e.currentTarget.dataset.urlSegment;\n        if (!currentEntity) {\n          return;\n        }\n\n        if (!query[queryEntityKey]) {\n          query[queryEntityKey] = [];\n        }\n\n        if (!query[queryEntityKey].includes(currentEntity)) {\n          query[queryEntityKey].push(currentEntity);\n        } else {\n          query[queryEntityKey].splice(query[queryEntityKey].indexOf(currentEntity), 1);\n        }\n\n        if (query[queryEntityKey].length === 0) {\n          params.delete(queryEntityKey);\n        }\n\n        replaceURL(document.title, setQueryParam());\n        window.location.reload();\n      };\n\n      entity.addEventListener('click', clickHandler);\n    });\n  }\n\n  const articleFilterForm = document.getElementById('ArticleFilterForm');\n\n  articleFilterForm.addEventListener('submit', (e) => {\n    const { target } = e;\n    const formData = {};\n\n    for (let i = 0; i < target.length; i += 1) {\n      const element = target.elements[i];\n      let { name } = element;\n\n      if (element.type === 'text' && element.value) {\n        formData[name] = element.value;\n      }\n\n      if (element.type === 'checkbox' && element.checked) {\n        name = element.name.substr(0, element.name.indexOf('['));\n        formData[name] = formData[name] ?? [];\n        formData[name].push(element.value);\n      }\n\n      if (element.type === 'select-one' && element.value) {\n        formData[name] = element.value;\n      }\n    }\n\n    // eslint-disable-next-line no-restricted-globals\n    const currentURL = location.protocol + '//' + location.host + location.pathname;\n    const newQueryParams = decodeURIComponent(new URLSearchParams(formData).toString());\n\n    window.location.href = `${currentURL}?${newQueryParams}`;\n\n    e.preventDefault();\n  });\n});\n"],"names":["window","addEventListener","allEntities","document","querySelectorAll","query","queryEntityKey","querySelector","dataset","filterEntityName","params","URLSearchParams","location","search","getUrl","protocol","host","path","pathname","replaceURL","title","url","history","pushState","setQueryParam","Object","keys","forEach","keyName","Array","isArray","length","set","join","queryString","toString","has","currentEntity","get","value","key","split","item","includes","push","splice","indexOf","from","entity","clickHandler","e","preventDefault","currentTarget","urlSegment","reload","articleFilterForm","getElementById","target","formData","i","element","elements","name","type","checked","substr","currentURL","newQueryParams","decodeURIComponent","href"],"sourceRoot":""}